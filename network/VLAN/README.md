# VLAN
## 定义
- `VLAN`(Virtual Local Area Network)的中文名为"虚拟局域网"。
- `VLAN`是一种将局域网设备从**逻辑上**划分成一个个网段, 从而实现虚拟工作组的新兴**数据交换技术**。
- `VLAN`这一新兴技术主要用于**交换机**和**路由器**中, 但是主流应用还是在交换机之中。但又不是所有**交换机**都具有此功能, 只有`VLAN`协议的第二层以上交换机才具有此功能, 这一点可以查看相应交换机的说明书即可得知。VLAN是一个在物理网络上根据用途、工作组、应用等来逻辑划分的局域网络, 是一个广播域, 与用户的物理位置没有关系。VLAN中的网络用户是通过LAN交换机来通信的。一个VLAN中的成员看不到另一个VLAN中的成员。

## 交换机的端口加入vlan有三种方式
- 交换机会把广播报文(目的mac地址全为1的报文)和**未知单播报文**从所有端口转发出去(除了报文的接收端口), 这就是广播(boardcast)。 
- 一般交换机会发送很多广播报文, 如果按照上面的处理方法, 势必会影响整个网络的通信。
- vlan就是为了划分广播域而产生的。划分vlan之后, 广播只在一个vlan内进行, 这就大大减少了广播报文对网络性能的影响。
- 交换机的端口加入vlan有三种方式:

### access
- `access`端口只能加入一个vlan, 一般用来连接交换机和PC, 也可以连接交换机和交换机。

### trunk
- `trunk`端口可以加入多个vlan, 就是说可以允许多个vlan的报文通过。`trunk`端口有一个默认vlan, 如果收到的报文没有`vlan ID`, 就把这个报文当做默认vlan的报文处理。
- `trunk`端口一般用于连接两台交换机, 这样可以只用一条`trunk`连接实现多个vlan的扩展(因为trunk允许多个vlan的数据通过, 如果用access端口, 个vlan就要一条连接, 多个vlan就需要多个连接, 而交换机的接口又是有限的)。
- 对于trunk端口发送出去的报文, 只有默认vlan的报文不带`vlan ID`, 其他vlan的报文都要带`vlan ID`(要不然, 对端口的交换机不知道该报文属于哪个vlan, 无法处理, 也就不能实现vlan跨交换机扩展了)。
- 简而言之, `trunk`端口的设计目的就是通过一条连接实现多个`vlan`的跨交换机扩展。

### hybrid
- `trunk`端口是`hybrid`端口的特例, 就是说`hybrid`端口可以实现比`trunk`端口更多的功能。
- `hybrid`端口可以加入多个vlan, 并可以设置该vlan的报文通过该端口发送是否带`vlan ID`(`trunk`端口不能设置, 只有默认vlan的报文不带`vlan ID`进行发送)。




